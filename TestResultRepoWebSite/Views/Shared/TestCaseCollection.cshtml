@using TestResultRepoData

@section JavaScript
{
    @*<script src="~/Scripts/js/TestCaseCollection.js"></script>*@
}

@{
    var groups = @Model;
    Guid idGuid;
}


@foreach (var group in groups as ICollection<string>)
{
    idGuid = Guid.NewGuid();

    <div id="@("accordion_" + idGuid)">
        <div class="card text-white contentLoader" onclick="renderGroupView('@group', '@idGuid')">
            <div class="card-header d-flex flex-row" id="@("heading_" + idGuid)" data-toggle="collapse" data-target="@("#collapse_" + idGuid)" aria-expanded="true" aria-controls="@("#collapse_" + idGuid)">
                <div class="truncate ">
                    @*<a href="/@("testsuites?id=" + @suite._Id)">@group.Name</a>*@
                    <p>@group</p>
                </div>
            </div>
            

            <div id="@("collapse_" + idGuid)" class="collapse" aria-labelledby="@("heading_" + idGuid)" data-parent="@("#accordion_" + idGuid)">
                <div class="card-body">
                    <ul class="list-group list-group-flush">
                        <div id=@("divPartialViewContainer_" + idGuid)>

                            @*  TestCaseCardList is rendered here  *@

                        </div>
                    </ul>
                </div>
            </div>
            

        </div>
    </div>
}
<script>
    function renderGroupView(group, idGuid) {
            $.ajax({
                url: '@Url.Action("GetPartialView", "TestCaseCollection")',
                type: 'GET',
                data: { 'name': group},
                contentType: 'application/html',
                //data: JSON.stringify(model),
                success: function (content) {
                    $('#divPartialViewContainer_' + idGuid).html(content);
                },
                error: function (e) { }
            });  
    }
</script>
